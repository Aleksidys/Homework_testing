(()=>{"use strict";class t{constructor(t){this.parentEl=t,this.ClickonsubmitBtn=this.ClickonsubmitBtn.bind(this),this.input=null,this.submitBtn=null}validateCreditCard(){const t=this.parentEl.querySelector("#card_number").value.replace(/\s/g,""),e=[{type:"mastercard",pattern:/^(5[1-5]\d{14})$/},{type:"visa",pattern:/^(4\d{15}|4\d{12})$/},{type:"mir",pattern:/^2[0-9]{15}$/}].find((e=>e.pattern.test(t)));return e&&(t=>{let e=+t[t.length-1],r=0;for(let e=t.length-2;e>=0;e--){let n=0,s=+t[e];e%2==0&&(s*=2),n=Math.floor(s/10)+s%10,r+=n}return 10-r%10===e})(t)?{cardType:e.type}:{}}setClass(t){const e=document.querySelectorAll(".card");if(e&&0!==e.length){if(t.cardType){const e=document.querySelector(`.cards .${t.cardType}`);e?(e.classList.add("valid-card"),console.log("валидация прошла на "+t.cardType)):console.error("Element not found: .cards ."+t.cardType)}}else console.error("Elements not found: .card")}static get markup(){return'\n        <form id="form" class="form-inline">\n          <div class="form-group">\n            <input class="form-control col-md-6" id="card_number" name="card_number" type="text" placeholder="Credit card number">\n            <button id="submitform" class="btn btn-success">Click to Validate</button>\n          </div>\n        </form>\n      '}bindToDOM(){this.parentEl.innerHTML=t.markup,this.input=this.parentEl.querySelector("#card_number"),this.submitBtn=this.parentEl.querySelector("#submitform"),this.submitBtn.addEventListener("click",this.ClickonsubmitBtn)}ClickonsubmitBtn(t){t.preventDefault();const e=this.validateCreditCard();document.querySelectorAll(".card").forEach((t=>{t.classList.remove("valid-card")})),this.setClass(e)}}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".cardWidgetCont");new t(e).bindToDOM()}))})();